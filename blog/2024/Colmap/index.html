<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Structure-from-Motion Revisited (COLMAP) | Semyeong Yu </title> <meta name="author" content="Semyeong Yu"> <meta name="description" content="SfM library"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://semyeong-yu.github.io/blog/2024/Colmap/"> <script src="/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script> <script src="/assets/js/distillpub/template.v2.js"></script> <script src="/assets/js/distillpub/transforms.v2.js"></script> <script src="/assets/js/distillpub/overrides.js"></script> <style type="text/css">.fake-img{background:#bbb;border:1px solid rgba(0,0,0,0.1);box-shadow:0 0 4px rgba(0,0,0,0.1);margin-bottom:12px}.fake-img p{font-family:monospace;color:white;text-align:left;margin:12px 0;text-align:center;font-size:16px}</style> </head> <body> <d-front-matter> <script async type="text/json">
      {
            "title": "Structure-from-Motion Revisited (COLMAP)",
            "description": "SfM library",
            "published": "December 23, 2024",
            "authors": [
              
            ],
            "katex": {
              "delimiters": [
                {
                  "left": "$",
                  "right": "$",
                  "display": false
                },
                {
                  "left": "$$",
                  "right": "$$",
                  "display": true
                }
              ]
            }
          }
    </script> </d-front-matter> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Semyeong</span> Yu </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-title> <h1>Structure-from-Motion Revisited (COLMAP)</h1> <p>SfM library</p> </d-title> <d-article> <h2 id="structure-from-motion-revisited">Structure-from-Motion Revisited</h2> <h4 id="johannes-l-schonberger-jan-michael-frahm">Johannes L. Schonberger, Jan-Michael Frahm</h4> <blockquote> <p>paper :<br> <a href="chrome-extension://efaidnbmnnnibpcajpcglclefindmkaj/https://openaccess.thecvf.com/content_cvpr_2016/papers/Schonberger_Structure-From-Motion_Revisited_CVPR_2016_paper.pdf">chrome-extension://efaidnbmnnnibpcajpcglclefindmkaj/https://openaccess.thecvf.com/content_cvpr_2016/papers/Schonberger_Structure-From-Motion_Revisited_CVPR_2016_paper.pdf</a><br> referenced blog :<br> <a href="https://xoft.tistory.com/88" rel="external nofollow noopener" target="_blank">https://xoft.tistory.com/88</a></p> </blockquote> <h3 id="colmap">COLMAP</h3> <ul> <li>COLMAP :<br> SfM (Structure from Motion)과 MVS (Multi-View Stereo)를 수행하는 library</li> <li> <code class="language-plaintext highlighter-rouge">SfM</code> : <ul> <li>input : images</li> <li>output : camera parameter(intrinsic, extrinsic), 3D point cloud</li> </ul> </li> <li> <code class="language-plaintext highlighter-rouge">MVS</code> : <ul> <li>input : SfM의 output</li> <li>output : 3D model reconstruction</li> </ul> </li> </ul> <h3 id="sfm-history">SfM History</h3> <ul> <li> <p>SfM 시초 :<br> “3d model acquisition from extended image sequences”, 1996.<br> “Structure from motion without correspondence”, CVPR, 2000.<br> “Automatic camera recovery for closed or open image sequences”, ECCV, 1998.<br> “Relative 3d reconstruction using multiple uncalibrated images”, IJR, 1995.<br> “Visual modeling with a hand-held camera”, IJCV, 2004</p> </li> <li> <p>internet images로 3D reconstruction 수행 :<br> “Multi-view matching for unordered image sets, or How do I organize my holiday snaps?”, ECCV, 2002.<br> “Photo tourism: exploring photo collections in 3d”, ACM TOG, 2006.<br> “Detailed real-time urban 3d reconstruction from video”, IJCV, 2008.</p> </li> <li>input images 수 늘리는 연구 : <ul> <li>수천장 처리 : “Building rome in a day”, ICCV, 2009.</li> <li>수백만장 처리 : “Building Rome on a Cloudless Day”, ECCV, 2010.<br> “Towards linear-time incremental structure from motion”, 3DV, 2013.<br> “From Single Image Query to Detailed 3D Reconstruction”, CVPR, 2015.<br> “From Dusk Till Dawn: Modeling in the Dark”, CVPR, 2016.</li> <li>수억장 처리 : “Reconstructing the World* in Six Days *(As Captured by the Yahoo 100 Million Image Dataset)”, CVPR, 2015.</li> </ul> </li> <li>SfM 연구 발전 방향 :<br> incremental, hierarchical, global 으로 총 3가지 발전 방향이 있었고,<br> 그 중 images를 sequentially 처리하는 incremental SfM이 가장 인기 있었지만<br> robustness, accuracy, completeness, scalability 관점에서 general SfM을 만들기 어려웠음<br> \(\rightarrow\) 근데 이를 본 논문 (COLMAP)에서 해결!!</li> </ul> <h3 id="incremental-sfm">Incremental SfM</h3> <ul> <li> <p>images</p> </li> <li>correspondence search <ul> <li> <code class="language-plaintext highlighter-rouge">feature extraction</code> :<br> image마다 geometric-radiometric-invariant feature 추출<br> e.g. SIFT <a href="https://velog.io/@everyman123/SIFT-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0" rel="external nofollow noopener" target="_blank">link</a> (scale-rotation-invariant feature extraction)<br> e.g. SURF, HOG, BRIEF, ORB 등 <a href="https://ggommappooh.tistory.com/entry/%EC%BB%B4%ED%93%A8%ED%84%B0-%EB%B9%84%EC%A0%84-Feature-Descriptors" rel="external nofollow noopener" target="_blank">link</a> </li> <li> <code class="language-plaintext highlighter-rouge">matching</code> :<br> extracted feature를 바탕으로 2 images에서 같은 scene part 찾기<br> image마다 feature를 비교하므로 time complexity \(O(N_I^2 N_F^2)\)<br> e.g. “Building Rome in a day”, ICCV, 2009.<br> e.g. “Building Rome on a Cloudless Day”, ECCV, 2010.<br> e.g. “Vocmatch: Efficient multiview correspondence for structure from motion”, ECCV, 2014.<br> e.g. “Reconstructing the World in Six Days (As Captured by the Yahoo 100 Million Image Dataset)”, CVPR, 2015.<br> e.g. “MatchMiner: Efficient Spanning Structure Mining in Large Image Collections”, ECCV, 2012.<br> e.g. “PAIGE: PAirwise Image Geometry Encoding for Improved Efficiency in Structure-from-Motion”, CVPR, 2015.<br> e.g. “Towards linear-time incremental structure from motion”, 3DV, 2013.<br> e..g CNN-based SuperGlue(2019)<br> e.g. ViT-based LoFTR(2021)</li> <li> <code class="language-plaintext highlighter-rouge">geometric verification</code> : <ul> <li>matching 결과를 보장하기 위한 검증 과정 (걸러냄)</li> <li>GRIC과 같은 기법을 통해 어떤 geometry model로 검증할 지 결정<br> geometry model 예시 : Fundametal Matrix, Trifocal Tensor, Projective Matrix, Calibration Matrix, Rigid Transformation, Affine Transformation</li> <li>Epipolar Geometry로 검증하는 예시 : Fundamental Matrix로 relative camera pose를 추정한 뒤 camera1의 feature points를 camera2로 projection 했을 때 matching points로 잘 mapping 되는지 검증<br> Fundamental Matrix 계산하기 위해 eight-point, five-point, RANSAC, LMedS, QDEGSAC 등의 기법 사용 가능</li> <li>output : scene graph (verified image pair 및 correpondence map)</li> </ul> </li> </ul> </li> <li>incremental reconstruction <ul> <li> <code class="language-plaintext highlighter-rouge">initialization</code> :<br> 최초로 등록한 2개의 images 선택 (매우 중요한 단계임)<br> 여러 camera로부터 많이 overlap되는 scene을 가진 images로 선택하면, Bundle Adjustment 단계에서 overlap part가 반복적으로 최적화되면서 reconstruction 성능이 높아지지만 연산 시간도 늘어남</li> <li> <code class="language-plaintext highlighter-rouge">image registration</code> : <ul> <li>camera pose를 world-coordinate에 등록한다</li> <li>initial 2 images의 경우 : fundamental matrix를 알고 있으므로 intrinsic param.와 extrinsic param. (camera pose)을 추정할 수 있다</li> <li>이후 images의 경우 : 이미 등록된 image들과의 feature correspondence와 PnP 알고리즘을 사용하여 intrinsic param.와 extrinsic param.를 추정할 수 있다</li> <li>PnP 알고리즘 : 3D points 위치와 projected 2D points 위치를 기반으로 camera pose를 추정</li> </ul> </li> <li> <code class="language-plaintext highlighter-rouge">triangulation</code> :<br> ddd</li> <li> <code class="language-plaintext highlighter-rouge">bundle adjustment</code> :<br> ddd</li> <li> <code class="language-plaintext highlighter-rouge">outlier filtering</code> :<br> RANSAC 및 minimal pose solver 등의 기법을 사용하여 outlier를 걸러냄<br> RANSAC : dataset의 randomly selected points에 대해 Fundamental Matrix 등 geometry model을 추정한 뒤 해당 model이 dataset에 얼마나 잘 부합하는지를 반복적으로 검증</li> </ul> </li> <li>3D reconstruction</li> </ul> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/assets/bibliography/"></d-bibliography> <div id="disqus_thread" style="max-width: 800px; margin: 0 auto;"> <script type="text/javascript">var disqus_shortname="semyeong-yu",disqus_identifier="/blog/2024/Colmap",disqus_title="Structure-from-Motion Revisited (COLMAP)";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}();</script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by Disqus.</a> </noscript> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Semyeong Yu. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-5YMLX9VHFX"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-5YMLX9VHFX");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>